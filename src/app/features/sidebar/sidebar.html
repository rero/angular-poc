<div
  class="fixed left-0 top-0 h-screen bg-white shadow-xl z-50 flex flex-col transition-all duration-300 ease-in-out overflow-hidden group border-r border-gray-200"
  [class.w-64]="expanded()" [class.w-16]="!expanded()" [class.hover:w-64]="!expanded()">

  <!-- Logo / Header -->
  <div class="flex items-center h-16 pl-4 pl-1 border-b border-gray-100 shrink-0">
    <img src="images/logo.svg" alt="Logo" class="w-8 h-8 object-contain shrink-0" />
    <span
      class="ml-4 font-bold text-xl text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap flex-1"
      [class.opacity-100]="expanded()">
      RERO+ POC
    </span>

    <button (click)="toggle()"
      class="mr-2 p-1 rounded-full hover:bg-[#1EA1CF]/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 focus:outline-none"
      [class.opacity-100]="expanded()">
      <i class="pi" [class.pi-angle-left]="expanded()" [class.pi-angle-right]="!expanded()"></i>
    </button>
  </div>

  <!-- Navigation Items -->
  <nav class="flex-1 py-4 flex flex-col gap-1 overflow-y-auto">
    @for (item of items(); track item.label) {
    <a [routerLink]="item.routerLink" routerLinkActive="bg-[#1EA1CF]/10 text-[#1765A2] border-r-4 border-[#1EA1CF]"
      [routerLinkActiveOptions]="{exact: true}"
      class="flex items-center h-12 px-4 text-gray-600 hover:bg-[#1EA1CF]/10 hover:text-[#1765A2] transition-colors relative">
      <i [class]="item.icon" class="text-xl shrink-0 w-8 text-center"></i>
      <span class="ml-4 font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap"
        [class.opacity-100]="expanded()">
        {{ item.label }}
      </span>
    </a>
    }
  </nav>

  <!-- User Section -->
  <div class="border-t border-gray-100 p-2">
    @if (store.isConnected()) {
    <div class="flex items-center justify-start p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors">
      <p-avatar icon="pi pi-user" size="large" shape="circle"
        [style]="{ 'background-color': '#E5E7EB', 'color': '#6B7280' }" />
      <div class="ml-3 overflow-hidden opacity-0 group-hover:opacity-100 transition-opacity duration-300"
        [class.opacity-100]="expanded()">
        <p class="text-sm font-medium text-gray-700 truncate whitespace-nowrap">
          {{ formattedUserName() }}
        </p>
        <p class="text-xs text-gray-500 truncate whitespace-nowrap">
          {{ store.user().username }}
        </p>
      </div>
    </div>
    }

    <!-- Auth Actions -->
    <div class="mt-1 flex flex-col gap-1">
      @for (item of userItems(); track item.label) {
      @if (item.visible) {
      <button (click)="item.command()"
        class="w-full flex items-center h-10 px-2 rounded-lg text-gray-600 hover:bg-[#1EA1CF]/10 hover:text-[#1765A2] transition-colors">
        <i [class]="item.icon" class="text-lg shrink-0 w-8 text-center"></i>
        <span
          class="ml-4 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap"
          [class.opacity-100]="expanded()">
          {{ item.label }}
        </span>
      </button>
      }
      }
    </div>
  </div>
</div>
